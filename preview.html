<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì•ŒíŒŒë²³ ì“°ê¸° ì—°ìŠµ â€“ PC/íƒœë¸”ë¦¿ ë””ìì¸ ë¯¸ë¦¬ë³´ê¸°</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600;700;800&family=Noto+Sans+KR:wght@400;500;700&family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
/* â”€â”€ RESET â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
:root {
  --cream:  #fffef0;
  --navy:   #1e1b4b;
  --amber:  #f59e0b;
  --sky:    #38bdf8;
  --green:  #34d399;
}

/* â”€â”€ OUTER PAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
html, body { height: 100%; }
body {
  background: #e8e5f0;
  font-family: 'Nunito', 'Noto Sans KR', sans-serif;
  color: var(--navy);
  -webkit-font-smoothing: antialiased;
  min-height: 100vh;
  padding: 24px 16px 40px;
}

h1,h2,h3,.font-baloo {
  font-family: 'Baloo 2', 'Noto Sans KR', sans-serif;
}

/* â”€â”€ SCREEN NAV â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.screen-nav {
  max-width: 1100px;
  margin: 0 auto 16px;
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
  align-items: center;
}
.screen-nav span {
  font-size: 12px;
  font-weight: 700;
  color: #6b6b8e;
  margin-right: 4px;
  white-space: nowrap;
}
.nav-btn {
  font-family: 'Nunito', 'Noto Sans KR', sans-serif;
  font-size: 13px;
  font-weight: 700;
  padding: 6px 14px;
  border-radius: 20px;
  border: 2px solid #c8c5e0;
  background: white;
  color: #555;
  cursor: pointer;
  transition: all .15s;
  white-space: nowrap;
}
.nav-btn:hover { border-color: var(--amber); color: var(--navy); }
.nav-btn.active {
  background: var(--navy);
  border-color: var(--navy);
  color: white;
}

/* â”€â”€ BROWSER CHROME â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.browser-wrap {
  max-width: 1100px;
  margin: 0 auto;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 24px 80px rgba(0,0,0,.22), 0 8px 24px rgba(0,0,0,.12);
}
.browser-chrome {
  background: #3a3a4a;
  padding: 10px 14px;
  display: flex;
  align-items: center;
  gap: 10px;
}
.dots { display: flex; gap: 6px; }
.dot { width: 12px; height: 12px; border-radius: 50%; }
.dot-r { background: #ff5f57; }
.dot-y { background: #ffbd2e; }
.dot-g { background: #28c840; }
.url-bar {
  flex: 1;
  background: #525265;
  border-radius: 6px;
  padding: 5px 12px;
  font-size: 12px;
  color: #aaa;
  font-family: monospace;
}

/* â”€â”€ APP CONTAINER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.app-container {
  background: var(--cream);
  min-height: 620px;
}
.app-inner {
  max-width: 1024px;
  margin: 0 auto;
}

/* â”€â”€ SCREEN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.screen { display: none; }
.screen.active { display: block; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HOME SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#screen-home .app-inner {
  padding: 48px 48px 48px;
  display: flex;
  flex-direction: column;
  gap: 32px;
}
.home-hero {
  display: flex;
  align-items: center;
  gap: 20px;
}
.mascot { font-size: 64px; animation: float 3s ease-in-out infinite; user-select: none; }
.home-hero h1 {
  font-size: 48px;
  font-weight: 800;
  line-height: 1.1;
}
.home-hero p {
  color: #6b7280;
  font-size: 15px;
  margin-top: 6px;
}
.home-cols {
  display: grid;
  grid-template-columns: 5fr 7fr;
  gap: 32px;
  align-items: start;
}
.action-col { display: flex; flex-direction: column; gap: 16px; }

.card-btn {
  display: flex;
  align-items: center;
  justify-content: space-between;
  border-radius: 24px;
  padding: 28px 32px;
  cursor: pointer;
  border: none;
  color: white;
  text-align: left;
  width: 100%;
  transition: transform .15s, box-shadow .15s;
}
.card-btn:hover { transform: translateY(-2px); }
.card-btn:active { transform: scale(.97); }
.card-btn .btn-title { font-family: 'Baloo 2','Noto Sans KR',sans-serif; font-size: 30px; font-weight: 800; line-height: 1; }
.card-btn .btn-sub { font-size: 13px; margin-top: 6px; opacity: .85; }
.card-btn .btn-icon { font-size: 52px; user-select: none; }

.btn-amber {
  background: linear-gradient(135deg, #f59e0b, #fbbf24);
  box-shadow: 0 12px 32px rgba(245,158,11,.35);
}
.btn-sky {
  background: linear-gradient(135deg, #38bdf8, #60a5fa);
  box-shadow: 0 12px 32px rgba(56,189,248,.30);
}

.info-box {
  background: #fffbeb;
  border: 1px solid #fde68a;
  border-radius: 16px;
  padding: 16px 20px;
  font-size: 13px;
  line-height: 1.7;
  color: #92400e;
}

/* Progress card */
.progress-card {
  background: white;
  border-radius: 24px;
  padding: 28px 28px;
  box-shadow: 0 4px 20px rgba(0,0,0,.07);
  border: 1px solid #fde68a;
}
.progress-card h2 {
  font-size: 20px;
  font-weight: 700;
  margin-bottom: 20px;
}
.prog-bar-wrap { margin-bottom: 20px; }
.prog-label { display: flex; justify-content: space-between; font-size: 13px; color: #6b7280; margin-bottom: 6px; }
.prog-label strong { color: #d97706; }
.prog-track {
  height: 10px;
  background: #f3f4f6;
  border-radius: 9999px;
  overflow: hidden;
  border: 1px solid #e5e7eb;
}
.prog-fill {
  height: 100%;
  background: linear-gradient(90deg, #f59e0b, #fcd34d);
  border-radius: 9999px;
  transition: width .7s;
}
.prog-fill-green {
  background: linear-gradient(90deg, #34d399, #6ee7b7);
}

.sec-label { display: flex; justify-content: space-between; font-size: 13px; font-weight: 700; color: #9ca3af; margin-bottom: 10px; }
.sec-label strong { color: #d97706; }

.dots-grid { display: flex; flex-wrap: wrap; gap: 6px; margin-bottom: 20px; }
.ldot {
  width: 34px; height: 34px;
  border-radius: 10px;
  display: flex; align-items: center; justify-content: center;
  font-family: 'Baloo 2','Noto Sans KR',sans-serif;
  font-size: 14px;
  font-weight: 700;
  position: relative;
  background: #e5e7eb;
  color: #6b7280;
}
.ldot.pass { background: #4ade80; color: white; }
.ldot.attempt { background: #fbbf24; color: white; }
.ldot .badge {
  position: absolute; top: -4px; right: -4px;
  width: 13px; height: 13px;
  border-radius: 9999px;
  font-size: 7px;
  display: flex; align-items: center; justify-content: center;
  border: 1px solid rgba(255,255,255,.6);
}
.ldot.pass .badge { background: #16a34a; color: white; }
.ldot.attempt .badge { background: #d97706; color: white; }

.legend { display: flex; gap: 20px; font-size: 12px; color: #9ca3af; }
.legend-item { display: flex; align-items: center; gap: 6px; }
.legend-dot { width: 12px; height: 12px; border-radius: 4px; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PRACTICE MODE SELECT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#screen-practice .app-inner {
  padding: 40px 48px;
  display: flex;
  flex-direction: column;
  gap: 28px;
}
.back-header { display: flex; align-items: center; gap: 16px; }
.back-btn {
  width: 40px; height: 40px;
  border-radius: 12px;
  border: 1px solid #e5e7eb;
  background: white;
  box-shadow: 0 1px 4px rgba(0,0,0,.07);
  font-size: 18px;
  cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  transition: background .15s;
}
.back-btn:hover { background: #f9fafb; }
.back-header .title { font-size: 28px; font-weight: 800; }
.back-header .sub { font-size: 14px; color: #9ca3af; margin-top: 2px; }

.mascot-row {
  display: flex;
  align-items: center;
  gap: 16px;
  background: white;
  border-radius: 20px;
  padding: 18px 24px;
  border: 1px solid #fde68a;
  box-shadow: 0 2px 8px rgba(0,0,0,.05);
}
.mascot-row .m { font-size: 44px; animation: float 3s ease-in-out infinite; user-select: none; }
.mascot-row .txt p:first-child { font-size: 17px; font-weight: 700; }
.mascot-row .txt p:last-child { font-size: 13px; color: #9ca3af; margin-top: 3px; }

.mode-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
.mode-card {
  display: flex;
  align-items: center;
  justify-content: space-between;
  border-radius: 28px;
  padding: 32px 32px;
  cursor: pointer;
  border: none;
  color: white;
  text-align: left;
  transition: transform .15s, box-shadow .15s;
}
.mode-card:hover { transform: translateY(-3px); }
.mode-card:active { transform: scale(.97); }
.mode-card .mc-title { font-family:'Baloo 2','Noto Sans KR',sans-serif; font-size: 36px; font-weight: 800; }
.mode-card .mc-sub { font-size: 14px; opacity: .85; margin-top: 8px; }
.mode-card .mc-progress { font-size: 13px; font-weight: 700; opacity: .9; margin-top: 8px; }
.mode-card .mc-letter { font-family:'Baloo 2','Noto Sans KR',sans-serif; font-size: 72px; font-weight: 800; opacity: .75; user-select: none; }
.mc-amber { background: linear-gradient(135deg, #f59e0b, #fb923c); box-shadow: 0 16px 40px rgba(245,158,11,.35); }
.mc-sky { background: linear-gradient(135deg, #38bdf8, #60a5fa); box-shadow: 0 16px 40px rgba(56,189,248,.30); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LETTER GRID
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#screen-grid .app-inner {
  padding: 40px 48px;
  display: flex;
  flex-direction: column;
  gap: 24px;
}
.start-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  background: linear-gradient(135deg, #f59e0b, #fcd34d);
  color: white;
  border: none;
  border-radius: 16px;
  padding: 20px 32px;
  font-family: 'Baloo 2','Noto Sans KR',sans-serif;
  font-size: 22px;
  font-weight: 800;
  cursor: pointer;
  box-shadow: 0 8px 24px rgba(245,158,11,.35);
  transition: transform .15s;
  animation: pulse-glow 2s ease-in-out infinite;
}
.start-btn:hover { transform: translateY(-2px); }

@keyframes pulse-glow {
  0%,100% { box-shadow: 0 8px 24px rgba(245,158,11,.35); }
  50% { box-shadow: 0 8px 36px rgba(245,158,11,.55); }
}

.letter-grid-row {
  display: grid;
  grid-template-columns: repeat(13, 1fr);
  gap: 8px;
}
.lbadge {
  width: 56px; height: 56px;
  border-radius: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Baloo 2','Noto Sans KR',sans-serif;
  font-size: 20px;
  font-weight: 700;
  position: relative;
  cursor: pointer;
  transition: transform .12s;
  border: 2px solid #e5e7eb;
  background: white;
  color: #4b5563;
}
.lbadge:hover { transform: scale(1.08); border-color: #fbbf24; background: #fffbeb; }
.lbadge.pass { background: #4ade80; border-color: #4ade80; color: white; }
.lbadge.attempt { background: #fbbf24; border-color: #fbbf24; color: white; }
.lbadge .lbadge-mark {
  position: absolute; top: -5px; right: -5px;
  width: 16px; height: 16px;
  border-radius: 9999px;
  font-size: 9px;
  display: flex; align-items: center; justify-content: center;
  border: 1.5px solid white;
  font-weight: 900;
}
.lbadge.pass .lbadge-mark { background: #16a34a; color: white; }
.lbadge.attempt .lbadge-mark { background: #d97706; color: white; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PRACTICE LETTER (DRAWING)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#screen-letter .app-inner {
  padding: 32px 48px;
  display: flex;
  flex-direction: column;
  gap: 24px;
}
.letter-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.letter-header .lh-center { text-align: center; }
.letter-header .lh-title {
  font-family: 'Baloo 2','Noto Sans KR',sans-serif;
  font-size: 26px;
  font-weight: 800;
}
.letter-header .lh-title span { color: #f59e0b; font-size: 34px; }
.letter-header .lh-sub { font-size: 12px; color: #9ca3af; margin-top: 2px; }
.pdots { display: flex; gap: 5px; align-items: center; }
.pdot { width: 8px; height: 8px; border-radius: 9999px; background: #d1d5db; }
.pdot.cur { width: 12px; height: 12px; background: #f59e0b; }

.two-col {
  display: grid;
  grid-template-columns: 3fr 2fr;
  gap: 24px;
  align-items: start;
}
.canvas-col { display: flex; flex-direction: column; gap: 12px; }

canvas#drawCanvas {
  width: 100%;
  max-width: 360px;
  margin: 0 auto;
  border-radius: 16px;
  border: 1px solid #e5e7eb;
  box-shadow: 0 4px 16px rgba(0,0,0,.08);
  cursor: crosshair;
  touch-action: none;
  user-select: none;
  display: block;
  background: white;
}

.clear-btn {
  width: 100%;
  padding: 14px;
  background: #f3f4f6;
  border: none;
  border-radius: 12px;
  font-family: 'Nunito','Noto Sans KR',sans-serif;
  font-size: 15px;
  font-weight: 700;
  color: #6b7280;
  cursor: pointer;
  transition: background .15s;
}
.clear-btn:hover { background: #e5e7eb; }

.controls-col { display: flex; flex-direction: column; gap: 16px; }
.hint-box {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  background: white;
  border-radius: 16px;
  padding: 16px 18px;
  border: 1px solid #fde68a;
  box-shadow: 0 2px 8px rgba(0,0,0,.05);
}
.hint-box .hm { font-size: 28px; animation: float 3s ease-in-out infinite; user-select: none; flex-shrink: 0; }
.hint-box p { font-size: 14px; line-height: 1.65; color: #374151; padding-top: 2px; }

.toolbar { display: flex; gap: 10px; }
.tool-btn {
  flex: 1;
  padding: 12px 8px;
  border-radius: 12px;
  border: none;
  font-family: 'Nunito','Noto Sans KR',sans-serif;
  font-size: 13px;
  font-weight: 700;
  cursor: pointer;
  display: flex; align-items: center; justify-content: center; gap: 6px;
  transition: background .15s;
}
.tool-btn.purple { background: #ede9fe; color: #7c3aed; }
.tool-btn.purple:hover { background: #ddd6fe; }
.tool-btn.sky { background: #e0f2fe; color: #0369a1; }
.tool-btn.sky:hover { background: #bae6fd; }
.tool-btn.gray { background: #f3f4f6; color: #6b7280; }
.tool-btn.gray:hover { background: #e5e7eb; }

.submit-btn {
  width: 100%;
  padding: 20px;
  background: linear-gradient(135deg, #34d399, #10b981);
  color: white;
  border: none;
  border-radius: 16px;
  font-family: 'Baloo 2','Noto Sans KR',sans-serif;
  font-size: 22px;
  font-weight: 800;
  cursor: pointer;
  box-shadow: 0 8px 24px rgba(52,211,153,.40);
  transition: transform .15s;
  display: flex; align-items: center; justify-content: center; gap: 8px;
}
.submit-btn:hover { transform: translateY(-2px); }
.submit-btn:active { transform: scale(.97); }

.nav-btns { display: flex; gap: 10px; margin-top: auto; }
.nav-small {
  flex: 1;
  padding: 12px;
  background: white;
  border: 1px solid #e5e7eb;
  border-radius: 12px;
  font-family: 'Nunito','Noto Sans KR',sans-serif;
  font-size: 14px;
  font-weight: 700;
  color: #6b7280;
  cursor: pointer;
  transition: background .15s;
}
.nav-small:hover { background: #f9fafb; }
.nav-small:disabled { opacity: .3; cursor: default; }

/* Result overlay */
.result-overlay {
  border-radius: 24px;
  padding: 24px;
  text-align: center;
  border: 4px solid;
}
.result-pass { background: linear-gradient(135deg, #f0fdf4, #dcfce7); border-color: #86efac; }
.result-fail { background: linear-gradient(135deg, #fffbeb, #fef3c7); border-color: #fcd34d; }
.result-stars { display: flex; justify-content: center; gap: 8px; margin-bottom: 12px; }
.result-stars span { font-size: 36px; animation: pop-in .4s cubic-bezier(.36,.07,.19,.97) both; }
.result-letter { font-family: 'Baloo 2','Noto Sans KR',sans-serif; font-size: 64px; font-weight: 800; color: #16a34a; }
.result-title { font-family: 'Baloo 2','Noto Sans KR',sans-serif; font-size: 24px; font-weight: 800; color: #15803d; margin: 8px 0; }
.result-msg { font-size: 14px; color: #166534; margin-bottom: 16px; }
.result-btns { display: flex; gap: 10px; }
.r-retry { flex: 1; padding: 14px; background: white; border: 2px solid #86efac; border-radius: 14px; color: #16a34a; font-family: 'Nunito','Noto Sans KR',sans-serif; font-size: 15px; font-weight: 700; cursor: pointer; }
.r-next { flex: 1; padding: 14px; background: #22c55e; border: none; border-radius: 14px; color: white; font-family: 'Nunito','Noto Sans KR',sans-serif; font-size: 15px; font-weight: 700; cursor: pointer; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   QUIZ INTRO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#screen-quiz .app-inner {
  padding: 40px 48px;
  display: flex;
  flex-direction: column;
  gap: 28px;
}
.quiz-cols { display: grid; grid-template-columns: 1fr 1fr; gap: 32px; align-items: start; }
.quiz-left { display: flex; flex-direction: column; gap: 16px; }
.mode-pick-btn {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20px 24px;
  border-radius: 16px;
  border: 2px solid #e5e7eb;
  background: white;
  cursor: pointer;
  transition: border-color .15s, background .15s;
}
.mode-pick-btn:hover { border-color: #fbbf24; }
.mode-pick-btn.sel-amber { border-color: #fbbf24; background: #fffbeb; box-shadow: 0 4px 16px rgba(251,191,36,.2); }
.mode-pick-btn.sel-sky { border-color: #38bdf8; background: #f0f9ff; box-shadow: 0 4px 16px rgba(56,189,248,.2); }
.mode-pick-btn.sel-purple { border-color: #a78bfa; background: #faf5ff; box-shadow: 0 4px 16px rgba(167,139,250,.2); }
.mode-pick-btn .mp-title { font-family: 'Baloo 2','Noto Sans KR',sans-serif; font-size: 18px; font-weight: 700; text-align: left; }
.mode-pick-btn .mp-sub { font-size: 13px; color: #9ca3af; margin-top: 3px; text-align: left; }
.mode-pick-btn .mp-letter { font-family: 'Baloo 2','Noto Sans KR',sans-serif; font-size: 36px; font-weight: 800; color: #d1d5db; }

.quiz-start-panel {
  background: white;
  border-radius: 28px;
  padding: 40px 32px;
  border: 1px solid #e5e7eb;
  box-shadow: 0 4px 20px rgba(0,0,0,.06);
  text-align: center;
  display: flex;
  flex-direction: column;
  gap: 16px;
  align-items: center;
}
.quiz-start-panel .big-icon { font-size: 80px; user-select: none; }
.quiz-start-panel .qs-title { font-family: 'Baloo 2','Noto Sans KR',sans-serif; font-size: 26px; font-weight: 800; }
.quiz-start-panel .qs-sub { font-size: 14px; color: #9ca3af; }
.quiz-start-btn {
  width: 100%;
  padding: 20px;
  background: linear-gradient(135deg, #38bdf8, #60a5fa);
  color: white;
  border: none;
  border-radius: 16px;
  font-family: 'Baloo 2','Noto Sans KR',sans-serif;
  font-size: 22px;
  font-weight: 800;
  cursor: pointer;
  box-shadow: 0 8px 24px rgba(56,189,248,.35);
  transition: transform .15s;
}
.quiz-start-btn:hover { transform: translateY(-2px); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   QUIZ QUESTION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#screen-question .app-inner {
  padding: 32px 48px;
  display: flex;
  flex-direction: column;
  gap: 20px;
}
.quiz-prog-row {
  display: flex;
  align-items: center;
  gap: 16px;
}
.quiz-prog-row .qp-label { font-size: 14px; color: #9ca3af; white-space: nowrap; }
.quiz-prog-row .qp-label strong { color: var(--navy); }
.quiz-prog-row .qp-right { font-size: 14px; font-weight: 700; color: #d97706; white-space: nowrap; }
.quiz-prog-track {
  flex: 1;
  height: 10px;
  background: #f3f4f6;
  border-radius: 9999px;
  overflow: hidden;
}
.quiz-prog-fill {
  height: 100%;
  background: linear-gradient(90deg, #f59e0b, #fcd34d);
  border-radius: 9999px;
  width: 30%;
  transition: width .3s;
}

.quiz-two-col {
  display: grid;
  grid-template-columns: 3fr 2fr;
  gap: 24px;
  align-items: start;
}
.quiz-canvas-wrap { position: relative; }
canvas#quizCanvas {
  width: 100%;
  max-width: 360px;
  margin: 0 auto;
  border-radius: 16px;
  border: 1px solid #e5e7eb;
  box-shadow: 0 4px 16px rgba(0,0,0,.08);
  cursor: crosshair;
  touch-action: none;
  user-select: none;
  display: block;
  background: white;
}

.quiz-controls { display: flex; flex-direction: column; justify-content: space-between; gap: 16px; }
.quiz-letter-prompt {
  background: white;
  border-radius: 20px;
  padding: 28px 24px;
  border: 1px solid #e5e7eb;
  box-shadow: 0 2px 8px rgba(0,0,0,.05);
  text-align: center;
}
.quiz-letter-prompt .ql-hint { font-size: 14px; color: #9ca3af; margin-bottom: 8px; }
.quiz-letter-prompt .ql-letter {
  font-family: 'Baloo 2','Noto Sans KR',sans-serif;
  font-size: 100px;
  font-weight: 800;
  color: var(--navy);
  line-height: 1;
  animation: pop-in .4s both;
}
.quiz-letter-prompt .ql-type { font-size: 13px; color: #9ca3af; margin-top: 6px; }

.quiz-action-btns { display: flex; flex-direction: column; gap: 10px; }
.grade-btn {
  width: 100%;
  padding: 20px;
  background: linear-gradient(135deg, #f59e0b, #fb923c);
  color: white;
  border: none;
  border-radius: 16px;
  font-family: 'Baloo 2','Noto Sans KR',sans-serif;
  font-size: 22px;
  font-weight: 800;
  cursor: pointer;
  box-shadow: 0 8px 24px rgba(245,158,11,.35);
  transition: transform .15s;
}
.grade-btn:hover { transform: translateY(-2px); }
.skip-btn {
  width: 100%;
  padding: 16px;
  background: #f3f4f6;
  border: none;
  border-radius: 14px;
  font-family: 'Nunito','Noto Sans KR',sans-serif;
  font-size: 16px;
  font-weight: 700;
  color: #6b7280;
  cursor: pointer;
  transition: background .15s;
}
.skip-btn:hover { background: #e5e7eb; }
.quiz-clear-btn { text-align: center; color: #9ca3af; font-size: 13px; cursor: pointer; padding: 8px; }
.quiz-clear-btn:hover { color: #6b7280; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   QUIZ RESULT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#screen-result .app-inner {
  padding: 40px 48px;
  display: flex;
  flex-direction: column;
  gap: 28px;
}
.result-grid { display: grid; grid-template-columns: 2fr 3fr; gap: 32px; align-items: start; }

.score-card {
  background: linear-gradient(135deg, #f0f9ff, #dbeafe);
  border-radius: 28px;
  padding: 40px 32px;
  border: 2px solid #bae6fd;
  text-align: center;
  display: flex;
  flex-direction: column;
  gap: 16px;
  align-items: center;
}
.score-stars { display: flex; gap: 10px; }
.score-stars span { font-size: 44px; animation: pop-in .4s both; }
.score-stars span.dim { opacity: .2; }
.score-num {
  font-family: 'Baloo 2','Noto Sans KR',sans-serif;
  font-size: 80px;
  font-weight: 800;
  color: #0284c7;
  line-height: 1;
}
.score-num small { font-size: 36px; color: #7dd3fc; }
.score-msg {
  font-family: 'Nunito','Noto Sans KR',sans-serif;
  font-size: 18px;
  font-weight: 700;
  color: #0369a1;
}
.score-btns { display: flex; flex-direction: column; gap: 10px; width: 100%; }
.retry-btn-2 {
  width: 100%;
  padding: 16px;
  background: linear-gradient(135deg, #38bdf8, #60a5fa);
  color: white;
  border: none;
  border-radius: 14px;
  font-family: 'Baloo 2','Noto Sans KR',sans-serif;
  font-size: 18px;
  font-weight: 800;
  cursor: pointer;
  box-shadow: 0 6px 20px rgba(56,189,248,.30);
}
.home-btn {
  width: 100%;
  padding: 14px;
  background: white;
  border: 1px solid #e5e7eb;
  border-radius: 14px;
  font-family: 'Nunito','Noto Sans KR',sans-serif;
  font-size: 15px;
  font-weight: 700;
  color: #6b7280;
  cursor: pointer;
}

.breakdown-card {
  background: white;
  border-radius: 28px;
  padding: 28px 28px;
  border: 1px solid #e5e7eb;
  box-shadow: 0 4px 20px rgba(0,0,0,.06);
}
.breakdown-card h3 { font-size: 20px; font-weight: 700; margin-bottom: 16px; }
.breakdown-grid { display: flex; flex-wrap: wrap; gap: 10px; }
.bk-badge {
  width: 48px; height: 48px;
  border-radius: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Baloo 2','Noto Sans KR',sans-serif;
  font-size: 20px;
  font-weight: 700;
  position: relative;
}
.bk-badge.ok { background: #dcfce7; color: #15803d; }
.bk-badge.ng { background: #fee2e2; color: #dc2626; }
.bk-badge .bk-mark { position: absolute; top: -4px; right: -4px; font-size: 11px; }
.wrong-box {
  margin-top: 20px;
  background: #fffbeb;
  border: 1px solid #fde68a;
  border-radius: 16px;
  padding: 16px 20px;
}
.wrong-box p { font-size: 13px; font-weight: 700; color: #92400e; margin-bottom: 10px; }
.wrong-pills { display: flex; flex-wrap: wrap; gap: 8px; }
.wrong-pill {
  background: #fde68a;
  color: #92400e;
  font-family: 'Baloo 2','Noto Sans KR',sans-serif;
  font-size: 18px;
  font-weight: 700;
  padding: 4px 14px;
  border-radius: 10px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SHARED ANIMATIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@keyframes float {
  0%,100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}
@keyframes pop-in {
  0% { transform: scale(0); opacity: 0; }
  70% { transform: scale(1.15); }
  100% { transform: scale(1); opacity: 1; }
}

/* Stroke modal */
.modal-backdrop {
  position: fixed; inset: 0;
  background: rgba(0,0,0,.5);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 100;
}
.modal-backdrop.show { display: flex; }
.modal-box {
  background: white;
  border-radius: 24px;
  padding: 32px;
  width: 340px;
  box-shadow: 0 24px 60px rgba(0,0,0,.20);
}
.modal-box h3 { font-size: 20px; font-weight: 700; margin-bottom: 16px; }
.modal-svg-wrap {
  width: 100%;
  aspect-ratio: 1;
  background: white;
  border-radius: 12px;
  border: 1px solid #e5e7eb;
  overflow: hidden;
  position: relative;
}
.modal-svg-wrap svg { width: 100%; height: 100%; }
.modal-close {
  margin-top: 16px;
  width: 100%;
  padding: 14px;
  background: #f3f4f6;
  border: none;
  border-radius: 12px;
  font-family: 'Nunito','Noto Sans KR',sans-serif;
  font-size: 15px;
  font-weight: 700;
  color: #374151;
  cursor: pointer;
}

/* Confetti */
.confetti-piece {
  position: fixed;
  width: 10px; height: 10px;
  border-radius: 2px;
  pointer-events: none;
  animation: confetti-fall linear forwards;
  z-index: 200;
}
@keyframes confetti-fall {
  0% { transform: translateY(-20px) rotate(0deg); opacity: 1; }
  100% { transform: translateY(110vh) rotate(720deg); opacity: 0; }
}
</style>
</head>
<body>

<!-- â”€â”€ SCREEN NAVIGATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="screen-nav">
  <span>í™”ë©´ ì„ íƒ â–¶</span>
  <button class="nav-btn active" onclick="showScreen('home')">ğŸ  í™ˆ</button>
  <button class="nav-btn" onclick="showScreen('practice')">âœï¸ ì—°ìŠµ ëª¨ë“œ ì„ íƒ</button>
  <button class="nav-btn" onclick="showScreen('grid')">ğŸ”¤ ê¸€ì ëª©ë¡</button>
  <button class="nav-btn" onclick="showScreen('letter')">âœï¸ ì“°ê¸° ì—°ìŠµ</button>
  <button class="nav-btn" onclick="showScreen('quiz')">ğŸ¯ í€´ì¦ˆ ì¸íŠ¸ë¡œ</button>
  <button class="nav-btn" onclick="showScreen('question')">ğŸ“ í€´ì¦ˆ ë¬¸ì œ</button>
  <button class="nav-btn" onclick="showScreen('result')">ğŸ† í€´ì¦ˆ ê²°ê³¼</button>
</div>

<!-- â”€â”€ BROWSER CHROME â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="browser-wrap">
  <div class="browser-chrome">
    <div class="dots">
      <div class="dot dot-r"></div>
      <div class="dot dot-y"></div>
      <div class="dot dot-g"></div>
    </div>
    <div class="url-bar" id="urlBar">localhost:3000/</div>
  </div>

  <div class="app-container">

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• HOME â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="screen active" id="screen-home">
      <div class="app-inner">
        <div class="home-hero">
          <div class="mascot">ğŸ¦Š</div>
          <div>
            <h1 class="font-baloo">ì•ŒíŒŒë²³ ì“°ê¸° ì—°ìŠµ</h1>
            <p>ì˜ì–´ 4ì¹¸ ë…¸íŠ¸ë¡œ ë°°ì›Œìš”!</p>
          </div>
        </div>

        <div class="home-cols">
          <!-- Left: Buttons -->
          <div class="action-col">
            <button class="card-btn btn-amber" onclick="showScreen('practice')">
              <div>
                <div class="btn-title">ì—°ìŠµí•˜ê¸°</div>
                <div class="btn-sub">ì•ŒíŒŒë²³ ì“°ê¸° ì—°ìŠµ</div>
              </div>
              <span class="btn-icon">âœï¸</span>
            </button>

            <button class="card-btn btn-sky" onclick="showScreen('quiz')">
              <div>
                <div class="btn-title">í€´ì¦ˆ í’€ê¸°</div>
                <div class="btn-sub">ì‹¤ë ¥ í™•ì¸ í€´ì¦ˆ</div>
              </div>
              <span class="btn-icon">ğŸ¯</span>
            </button>

            <div class="info-box">
              ğŸ’¡ <strong>4ì¹¸ ë…¸íŠ¸</strong>ì— ê¸€ìë¥¼ ì¨ìš”!<br>
              ëŒ€ë¬¸ìëŠ” ìœ„ìª½ ë‘ ì¹¸, ì†Œë¬¸ìëŠ” ê°€ìš´ë° ì¹¸ì— ì¨ì•¼ í•´ìš”.
            </div>
            <p style="font-size:12px;color:#9ca3af;text-align:center;padding-top:4px;">
              ì—´ì‹¬íˆ ì—°ìŠµí•´ì„œ ì•ŒíŒŒë²³ ë§ˆìŠ¤í„°ê°€ ë˜ì! ğŸŒŸ
            </p>
          </div>

          <!-- Right: Progress -->
          <div class="progress-card">
            <h2 class="font-baloo">ğŸ“Š ë‚´ ì§„í–‰ í˜„í™©</h2>

            <div class="prog-bar-wrap">
              <div class="prog-label"><span>ì „ì²´ ì§„í–‰ í˜„í™©</span><strong>8/52 ì™„ë£Œ</strong></div>
              <div class="prog-track"><div class="prog-fill" style="width:15%"></div></div>
            </div>

            <div class="sec-label"><span>ëŒ€ë¬¸ì A â€“ Z</span><strong>5/26</strong></div>
            <div class="dots-grid" id="upperDots"></div>

            <div class="sec-label" style="margin-top:16px"><span>ì†Œë¬¸ì a â€“ z</span><strong>3/26</strong></div>
            <div class="dots-grid" id="lowerDots"></div>

            <div class="legend">
              <div class="legend-item"><div class="legend-dot" style="background:#4ade80"></div>ì™„ë£Œ</div>
              <div class="legend-item"><div class="legend-dot" style="background:#fbbf24"></div>ë„ì „ ì¤‘</div>
              <div class="legend-item"><div class="legend-dot" style="background:#e5e7eb"></div>ë¯¸ë„ì „</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• PRACTICE MODE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="screen" id="screen-practice">
      <div class="app-inner">
        <div class="back-header">
          <button class="back-btn" onclick="showScreen('home')">â†</button>
          <div>
            <div class="title font-baloo">ì—°ìŠµí•˜ê¸°</div>
            <div class="sub">ì–´ë–¤ ì•ŒíŒŒë²³ì„ ì—°ìŠµí• ê¹Œìš”?</div>
          </div>
        </div>

        <div class="mascot-row">
          <div class="m">ğŸ¦Š</div>
          <div class="txt">
            <p>ëŒ€ë¬¸ì ë˜ëŠ” ì†Œë¬¸ìë¥¼ ì„ íƒí•˜ì„¸ìš”!</p>
            <p>ê° ê¸€ìë¥¼ ì§ì ‘ ì“°ë©´ì„œ íšìˆœì„ ìµí˜€ìš”</p>
          </div>
        </div>

        <div class="mode-grid">
          <button class="mode-card mc-amber" onclick="showScreen('grid', null, true)">
            <div>
              <div class="mc-title">ëŒ€ë¬¸ì</div>
              <div class="mc-sub">A, B, C ... Z</div>
              <div class="mc-progress">5 / 26 ì™„ë£Œ âœ“</div>
            </div>
            <div class="mc-letter">Aa</div>
          </button>

          <button class="mode-card mc-sky" onclick="showScreen('grid', null, false)">
            <div>
              <div class="mc-title">ì†Œë¬¸ì</div>
              <div class="mc-sub">a, b, c ... z</div>
              <div class="mc-progress">ì•„ì§ ì‹œì‘ ì „ì´ì—ìš”!</div>
            </div>
            <div class="mc-letter">aa</div>
          </button>
        </div>

        <div class="info-box">
          ğŸ’¡ <strong>4ì¹¸ ë…¸íŠ¸</strong>ì— ê¸€ìë¥¼ ì¨ìš”! ëŒ€ë¬¸ìëŠ” ìœ„ìª½ ë‘ ì¹¸, ì†Œë¬¸ìëŠ” ê°€ìš´ë° ì¹¸ì— ì¨ì•¼ í•´ìš”.
        </div>
      </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• LETTER GRID â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="screen" id="screen-grid">
      <div class="app-inner">
        <div class="back-header">
          <button class="back-btn" onclick="showScreen('practice')">â†</button>
          <div>
            <div class="title font-baloo" id="gridTitle">ëŒ€ë¬¸ì ì—°ìŠµ</div>
            <div class="sub" id="gridSub">5ê°œ ì™„ë£Œ Â· 3ê°œ ë„ì „ ì¤‘ Â· 18ê°œ ë¯¸ë„ì „</div>
          </div>
        </div>

        <button class="start-btn" onclick="showScreen('letter', currentIsUpper ? UPPER[0] : LOWER[0], currentIsUpper)">ğŸš€ ì²˜ìŒë¶€í„° ìˆœì„œëŒ€ë¡œ ì‹œì‘í•˜ê¸°</button>

        <div>
          <div class="prog-label"><span>ì§„í–‰ë¥ </span><strong style="color:#16a34a">19%</strong></div>
          <div class="prog-track"><div class="prog-fill prog-fill-green" style="width:19%"></div></div>
        </div>

        <div class="letter-grid-row" id="letterGrid"></div>

        <div class="legend">
          <div class="legend-item"><div class="legend-dot" style="background:#4ade80"></div>ì™„ë£Œ</div>
          <div class="legend-item"><div class="legend-dot" style="background:#fbbf24"></div>ë„ì „ ì¤‘</div>
          <div class="legend-item"><div class="legend-dot" style="background:white;border:2px solid #e5e7eb"></div>ë¯¸ë„ì „</div>
        </div>
      </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• LETTER PRACTICE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="screen" id="screen-letter">
      <div class="app-inner">
        <!-- Header -->
        <div class="letter-header">
          <button class="back-btn" onclick="showScreen('grid')">â†</button>
          <div class="lh-center">
            <div class="lh-title font-baloo" id="letterHeadMode">ëŒ€ë¬¸ì <span id="letterHeadLetter">A</span></div>
            <div class="lh-sub" id="letterHeadSub">1 / 26</div>
          </div>
          <div class="pdots" id="practiceDots"></div>
        </div>

        <!-- Two columns -->
        <div class="two-col">
          <!-- Canvas -->
          <div class="canvas-col">
            <canvas id="drawCanvas" width="400" height="400"></canvas>
            <button class="clear-btn" id="clearBtn">ğŸ—‘ï¸ ì§€ìš°ê¸°</button>
          </div>

          <!-- Controls -->
          <div class="controls-col">
            <div class="hint-box">
              <span class="hm">ğŸ¦Š</span>
              <p id="hintText">AëŠ” ì‚°ì²˜ëŸ¼ ë¾°ì¡±í•´ìš”! ê°€ìš´ë° ë§‰ëŒ€ê¸°ë„ ìŠì§€ ë§ˆì„¸ìš” â›°ï¸</p>
            </div>

            <div class="toolbar">
              <button class="tool-btn purple" onclick="showStrokeModal()">â–¶ íš ìˆœì„œ ë³´ê¸°</button>
              <button class="tool-btn sky" id="guideToggle" onclick="toggleGuide()">ğŸ‘ ê°€ì´ë“œ ON</button>
            </div>

            <div id="resultArea">
              <button class="submit-btn" onclick="submitPractice()">âœ… í™•ì¸í•˜ê¸°</button>
            </div>

            <div class="nav-btns">
              <button class="nav-small" disabled>â† ì´ì „</button>
              <button class="nav-small" onclick="">ë‹¤ìŒ â†’</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• QUIZ INTRO â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="screen" id="screen-quiz">
      <div class="app-inner">
        <div class="back-header">
          <button class="back-btn" onclick="showScreen('home')">â†</button>
          <div>
            <div class="title font-baloo">í€´ì¦ˆ í’€ê¸°</div>
            <div class="sub">ì—°ìŠµí•œ ì•ŒíŒŒë²³ì—ì„œ ë¬¸ì œê°€ ë‚˜ì™€ìš”</div>
          </div>
        </div>

        <div class="quiz-cols">
          <div class="quiz-left">
            <div class="mascot-row">
              <div class="m">ğŸ¯</div>
              <div class="txt">
                <p>í€´ì¦ˆë¡œ ì‹¤ë ¥ì„ í™•ì¸í•´ìš”!</p>
                <p>ëª¨ë“œë¥¼ ì„ íƒí•˜ê³  ì‹œì‘í•˜ì„¸ìš”</p>
              </div>
            </div>

            <p class="font-baloo" style="font-size:18px;font-weight:700;">ëª¨ë“œ ì„ íƒ</p>

            <button class="mode-pick-btn sel-amber" onclick="selectMode(this,'amber')">
              <div>
                <div class="mp-title">ëŒ€ë¬¸ì</div>
                <div class="mp-sub">5ê°œ ì—°ìŠµí•¨</div>
              </div>
              <div class="mp-letter">Aa</div>
            </button>

            <button class="mode-pick-btn" onclick="selectMode(this,'sky')">
              <div>
                <div class="mp-title">ì†Œë¬¸ì</div>
                <div class="mp-sub">3ê°œ ì—°ìŠµí•¨</div>
              </div>
              <div class="mp-letter">aa</div>
            </button>

            <button class="mode-pick-btn" onclick="selectMode(this,'purple')">
              <div>
                <div class="mp-title">í˜¼í•©</div>
                <div class="mp-sub">ëŒ€ë¬¸ì + ì†Œë¬¸ì ì„ì–´ì„œ</div>
              </div>
              <div class="mp-letter" style="font-size:28px;">Aa+aa</div>
            </button>
          </div>

          <div class="quiz-start-panel">
            <div class="big-icon">ğŸ…°ï¸</div>
            <div class="qs-title font-baloo">ëŒ€ë¬¸ì í€´ì¦ˆ</div>
            <div class="qs-sub">ì´ 5ë¬¸ì œê°€ ì¶œì œë©ë‹ˆë‹¤</div>
            <button class="quiz-start-btn" onclick="showScreen('question')">ğŸ¯ í€´ì¦ˆ ì‹œì‘!</button>
          </div>
        </div>
      </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• QUIZ QUESTION â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="screen" id="screen-question">
      <div class="app-inner">
        <div class="quiz-prog-row">
          <button class="back-btn" onclick="showScreen('quiz')">â†</button>
          <div class="qp-label">ë¬¸ì œ <strong>3</strong> / 5</div>
          <div class="quiz-prog-track">
            <div class="quiz-prog-fill" style="width:40%"></div>
          </div>
          <div class="qp-right">2ê°œ ì •ë‹µ</div>
        </div>

        <div class="quiz-two-col">
          <!-- Canvas -->
          <div class="quiz-canvas-wrap">
            <canvas id="quizCanvas" width="400" height="400"></canvas>
          </div>

          <!-- Controls -->
          <div class="quiz-controls">
            <div class="quiz-letter-prompt">
              <div class="ql-hint">ì´ ê¸€ìë¥¼ ì¨ë³´ì„¸ìš”!</div>
              <div class="ql-letter font-baloo">C</div>
              <div class="ql-type">ëŒ€ë¬¸ì</div>
            </div>
            <div class="quiz-action-btns">
              <button class="grade-btn" onclick="gradeQuiz()">ì±„ì í•˜ê¸° âœ“</button>
              <button class="skip-btn" onclick="showScreen('result')">ê±´ë„ˆë›°ê¸°</button>
              <div class="quiz-clear-btn" onclick="clearQuizCanvas()">ğŸ—‘ï¸ ì§€ìš°ê¸°</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• QUIZ RESULT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="screen" id="screen-result">
      <div class="app-inner">
        <div class="back-header">
          <button class="back-btn" onclick="showScreen('home')">â†</button>
          <div>
            <div class="title font-baloo">í€´ì¦ˆ ê²°ê³¼</div>
          </div>
        </div>

        <div class="result-grid">
          <!-- Score -->
          <div class="score-card">
            <div class="score-stars">
              <span style="animation-delay:.0s">â­</span>
              <span style="animation-delay:.15s">â­</span>
              <span class="dim">â­</span>
            </div>
            <div class="score-num font-baloo">4<small>/5</small></div>
            <div class="score-msg">ì˜í–ˆì–´ìš”! ğŸ‘</div>
            <div class="score-btns">
              <button class="retry-btn-2 font-baloo" onclick="showScreen('question')">ğŸ”„ ë‹¤ì‹œ ë„ì „!</button>
              <button class="home-btn" onclick="showScreen('home')">ğŸ  í™ˆìœ¼ë¡œ</button>
            </div>
          </div>

          <!-- Breakdown -->
          <div class="breakdown-card">
            <h3 class="font-baloo">ë¬¸ì œë³„ ê²°ê³¼</h3>
            <div class="breakdown-grid">
              <div class="bk-badge ok">A<span class="bk-mark">âœ“</span></div>
              <div class="bk-badge ok">B<span class="bk-mark">âœ“</span></div>
              <div class="bk-badge ng">C<span class="bk-mark">âœ—</span></div>
              <div class="bk-badge ok">D<span class="bk-mark">âœ“</span></div>
              <div class="bk-badge ok">E<span class="bk-mark">âœ“</span></div>
            </div>
            <div class="wrong-box">
              <p>ğŸ’ª í‹€ë¦° ê¸€ìë¥¼ ë‹¤ì‹œ ì—°ìŠµí•´ ë³´ì„¸ìš”!</p>
              <div class="wrong-pills">
                <span class="wrong-pill">C</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div><!-- app-container -->
</div><!-- browser-wrap -->

<!-- â”€â”€ STROKE MODAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="modal-backdrop" id="strokeModal" onclick="hideStrokeModal()">
  <div class="modal-box" onclick="event.stopPropagation()">
    <h3 class="font-baloo" id="strokeModalTitle">A íš ìˆœì„œ</h3>
    <div class="modal-svg-wrap">
      <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" id="strokeSvg">
        <!-- ê³µì±… 4ì„ : ì—¬ë°± ìˆëŠ” ì¸ì…‹ ìŠ¤íƒ€ì¼, 3ë²ˆì§¸ ì„ ë§Œ ë¹¨ê°„ìƒ‰ -->
        <line x1="0" y1="18.5" x2="100" y2="18.5" stroke="#9CA3AF" stroke-width="0.8"/>
        <line x1="0" y1="39.5" x2="100" y2="39.5" stroke="#9CA3AF" stroke-width="0.6" stroke-dasharray="4,3"/>
        <line x1="0" y1="60.5" x2="100" y2="60.5" stroke="#EF4444" stroke-width="0.8"/>
        <line x1="0" y1="81.5" x2="100" y2="81.5" stroke="#9CA3AF" stroke-width="0.6"/>
        <!-- ëŒ€ë¬¸ì: matrix(0.5,0,0,0.5,25,25) â†’ y=[8,92]â†’y=[29,71] (2ë²ˆ~4ë²ˆì„ ) -->
        <g id="strokeGroup" transform="matrix(0.5, 0, 0, 0.5, 25, 14.5)"></g>
      </svg>
    </div>
    <button class="modal-close" onclick="hideStrokeModal()">ë‹«ê¸°</button>
  </div>
</div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DATA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const UPPER = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
const LOWER = 'abcdefghijklmnopqrstuvwxyz'.split('');

const upperStatus = {A:'pass',B:'pass',C:'pass',D:'attempt',E:'pass',F:'attempt',G:'attempt'};
const lowerStatus = {a:'pass',b:'pass',c:'attempt'};

const hints = {
  A:'AëŠ” ì‚°ì²˜ëŸ¼ ë¾°ì¡±í•´ìš”! ê°€ìš´ë° ë§‰ëŒ€ê¸°ë„ ìŠì§€ ë§ˆì„¸ìš” â›°ï¸',
  B:'BëŠ” ë°°ê°€ ë³¼ë¡ë³¼ë¡! ìœ„ì•„ë˜ ë™ê·¸ë¼ë¯¸ ë‘ ê°œì˜ˆìš” ğŸˆ',
  C:'CëŠ” ë‹¬ì²˜ëŸ¼ ë‘¥ê¸€ê²Œ! ì…ì´ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì—´ë ¤ìˆì–´ìš” ğŸŒ™',
  D:'DëŠ” ì„¸ë¡œì¤„ì— í° ë°°ê°€ ë¶™ì—ˆì–´ìš”! ì˜¤ë¥¸ìª½ì´ ë³¼ë¡í•´ìš” ğŸš¢',
  E:'EëŠ” ë¹—ì²˜ëŸ¼ ë§‰ëŒ€ê¸° ì„¸ ê°œ! ìœ„, ê°€ìš´ë°, ì•„ë˜ì—ìš” âœ¨',
};

const uppercaseStrokes = {
  A:['M 50,8 L 15,92','M 50,8 L 85,92','M 26,58 L 74,58'],
  B:['M 20,8 L 20,92','M 20,8 C 58,8 58,50 20,50','M 20,50 C 62,50 62,92 20,92'],
  C:['M 80,22 A 36,40 0 1 0 80,78'],
  D:['M 20,8 L 20,92','M 20,8 C 80,8 80,92 20,92'],
  E:['M 20,8 L 20,92','M 20,8 L 80,8','M 20,50 L 68,50','M 20,92 L 80,92'],
  F:['M 20,8 L 20,92','M 20,8 L 80,8','M 20,48 L 68,48'],
  G:['M 80,22 A 36,40 0 1 0 80,68 L 55,68 L 55,52'],
  H:['M 20,8 L 20,92','M 80,8 L 80,92','M 20,50 L 80,50'],
  I:['M 35,8 L 65,8','M 50,8 L 50,92','M 35,92 L 65,92'],
  J:['M 35,8 L 65,8','M 65,8 L 65,72 Q 65,92 45,92 Q 25,92 25,72'],
  K:['M 20,8 L 20,92','M 20,50 L 80,8','M 44,32 L 80,92'],
  L:['M 20,8 L 20,92','M 20,92 L 80,92'],
  M:['M 15,92 L 15,8','M 15,8 L 50,55','M 50,55 L 85,8','M 85,8 L 85,92'],
  N:['M 20,92 L 20,8','M 20,8 L 80,92','M 80,8 L 80,92'],
  O:['M 50,8 C 85,8 85,92 50,92 C 15,92 15,8 50,8'],
  P:['M 20,8 L 20,92','M 20,8 C 72,8 72,50 20,50'],
  Q:['M 50,8 C 85,8 85,92 50,92 C 15,92 15,8 50,8','M 60,70 L 82,90'],
  R:['M 20,8 L 20,92','M 20,8 C 72,8 72,50 20,50','M 45,50 L 80,92'],
  S:['M 78,22 C 78,8 22,8 22,48 C 22,58 78,58 78,78 C 78,92 22,92 22,78'],
  T:['M 15,8 L 85,8','M 50,8 L 50,92'],
  U:['M 20,8 L 20,72 Q 20,92 50,92 Q 80,92 80,72 L 80,8'],
  V:['M 15,8 L 50,92','M 85,8 L 50,92'],
  W:['M 10,8 L 30,92','M 30,92 L 50,48','M 50,48 L 70,92','M 70,92 L 90,8'],
  X:['M 15,8 L 85,92','M 85,8 L 15,92'],
  Y:['M 15,8 L 50,50','M 85,8 L 50,50','M 50,50 L 50,92'],
  Z:['M 15,8 L 85,8','M 85,8 L 15,92','M 15,92 L 85,92'],
};
const lowercaseStrokes = {
  a:['M 62,54 C 62,46 18,46 18,62 C 18,77 62,77 62,62','M 62,54 L 62,77'],
  b:['M 22,12 L 22,77','M 22,55 C 22,47 68,47 68,62 C 68,77 22,77 22,62'],
  c:['M 65,58 C 65,47 18,47 18,62 C 18,77 65,77 65,70'],
  d:['M 62,54 C 62,46 18,46 18,62 C 18,77 62,77 62,62','M 62,12 L 62,77'],
  e:['M 18,62 L 65,62 C 65,47 18,47 18,62 C 18,77 63,77 63,70'],
  f:['M 65,24 C 65,10 28,10 28,38 L 28,77','M 12,55 L 54,55'],
  g:['M 65,54 C 65,46 18,46 18,62 C 18,77 65,77 65,62','M 65,54 L 65,90 C 65,98 22,98 22,87'],
  h:['M 20,12 L 20,77','M 20,60 C 20,47 68,47 68,58 L 68,77'],
  i:['M 42,52 L 42,77','M 40,43 L 44,43'],
  j:['M 52,52 L 52,90 C 52,100 18,100 18,88','M 50,43 L 54,43'],
  k:['M 20,12 L 20,77','M 20,60 L 65,50','M 43,56 L 65,77'],
  l:['M 40,12 L 40,77'],
  m:['M 14,55 L 14,77','M 14,55 C 14,47 34,47 34,57 L 34,77','M 34,57 C 34,47 68,47 68,57 L 68,77'],
  n:['M 18,55 L 18,77','M 18,55 C 18,47 65,47 65,57 L 65,77'],
  o:['M 42,50 C 18,50 18,77 42,77 C 66,77 66,50 42,50'],
  p:['M 22,55 C 22,47 68,47 68,62 C 68,77 22,77 22,62','M 22,52 L 22,95'],
  q:['M 65,54 C 65,46 18,46 18,62 C 18,77 65,77 65,62','M 65,52 L 65,95'],
  r:['M 20,55 L 20,77','M 20,55 C 20,47 65,47 65,58'],
  s:['M 65,55 C 65,47 18,47 18,59 C 18,67 65,67 65,73 C 65,80 18,80 18,74'],
  t:['M 42,18 L 42,77','M 22,53 L 62,53'],
  u:['M 20,52 L 20,68 C 20,80 65,80 65,68 L 65,52'],
  v:['M 18,52 L 42,77','M 68,52 L 42,77'],
  w:['M 12,52 L 28,77','M 28,77 L 42,62','M 42,62 L 58,77','M 58,77 L 76,52'],
  x:['M 18,52 L 65,77','M 65,52 L 18,77'],
  y:['M 18,52 L 42,70','M 68,52 L 42,70 L 28,95'],
  z:['M 18,52 L 65,52','M 65,52 L 18,77','M 18,77 L 65,77'],
};

const screenUrls = {
  home:'localhost:3000/',
  practice:'localhost:3000/practice',
  grid:'localhost:3000/practice/uppercase',
  letter:'localhost:3000/practice/uppercase/A',
  quiz:'localhost:3000/quiz',
  question:'localhost:3000/quiz (ë¬¸ì œ 3/5)',
  result:'localhost:3000/quiz (ê²°ê³¼)',
};

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCREEN NAVIGATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let currentLetter = 'A';
let currentIsUpper = true;

function showScreen(id, letter, isUpper) {
  // ê¸€ìÂ·ëª¨ë“œ ì—…ë°ì´íŠ¸ (ì „ë‹¬ëœ ê²½ìš°ì—ë§Œ)
  if (letter !== undefined) currentLetter = letter;
  if (isUpper !== undefined) currentIsUpper = isUpper;

  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
  document.getElementById('screen-' + id).classList.add('active');
  const btn = [...document.querySelectorAll('.nav-btn')].find(b => b.getAttribute('onclick').includes("'"+id+"'"));
  if (btn) btn.classList.add('active');

  // ê¸€ì ê·¸ë¦¬ë“œ í™”ë©´: ëŒ€ë¬¸ì/ì†Œë¬¸ì ì—…ë°ì´íŠ¸
  if (id === 'grid') {
    renderLetterGrid();
    const statusMap = currentIsUpper ? upperStatus : lowerStatus;
    const letters = currentIsUpper ? UPPER : LOWER;
    const passed = letters.filter(l => statusMap[l] === 'pass').length;
    const attempted = letters.filter(l => statusMap[l] === 'attempt').length;
    document.getElementById('gridTitle').textContent = (currentIsUpper ? 'ëŒ€ë¬¸ì' : 'ì†Œë¬¸ì') + ' ì—°ìŠµ';
    document.getElementById('gridSub').textContent = `${passed}ê°œ ì™„ë£Œ Â· ${attempted}ê°œ ë„ì „ ì¤‘ Â· ${26 - passed - attempted}ê°œ ë¯¸ë„ì „`;
  }

  // ì“°ê¸° ì—°ìŠµ í™”ë©´: ì„ íƒëœ ê¸€ìë¡œ í—¤ë”Â·íŒíŠ¸ ì—…ë°ì´íŠ¸
  if (id === 'letter') {
    const letters = currentIsUpper ? UPPER : LOWER;
    const idx = letters.indexOf(currentLetter);
    document.getElementById('letterHeadLetter').textContent = currentLetter;
    document.getElementById('letterHeadMode').firstChild.textContent = currentIsUpper ? 'ëŒ€ë¬¸ì ' : 'ì†Œë¬¸ì ';
    document.getElementById('letterHeadSub').textContent = `${idx + 1} / ${letters.length}`;
    document.getElementById('hintText').textContent = hints[currentLetter] || `${currentLetter}ë¥¼ ì¨ë³´ì„¸ìš”!`;
    document.getElementById('urlBar').textContent = `localhost:3000/practice/${currentIsUpper?'uppercase':'lowercase'}/${currentLetter}`;
    renderPracticeDots(idx);
    initCanvas();
    document.getElementById('resultArea').innerHTML = '<button class="submit-btn" onclick="submitPractice()">âœ… í™•ì¸í•˜ê¸°</button>';
  } else {
    document.getElementById('urlBar').textContent = screenUrls[id] || 'localhost:3000/';
  }
  if (id === 'question') { initQuizCanvas(); }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RENDER DOTS (Home)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function renderDots(containerId, letters, statusMap) {
  const el = document.getElementById(containerId);
  if (!el) return;
  el.innerHTML = letters.map(l => {
    const st = statusMap[l] || '';
    const badge = st === 'pass' ? `<span class="badge">âœ“</span>` : st === 'attempt' ? `<span class="badge">Â·</span>` : '';
    return `<div class="ldot ${st}" title="${l}: ${st||'ë¯¸ë„ì „'}">${l}${badge}</div>`;
  }).join('');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RENDER LETTER GRID
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function renderLetterGrid() {
  const el = document.getElementById('letterGrid');
  if (!el) return;
  const letters = currentIsUpper ? UPPER : LOWER;
  const statusMap = currentIsUpper ? upperStatus : lowerStatus;
  el.innerHTML = letters.map(l => {
    const st = statusMap[l] || '';
    const mark = st === 'pass' ? `<span class="lbadge-mark">âœ“</span>` : st === 'attempt' ? `<span class="lbadge-mark">!</span>` : '';
    return `<div class="lbadge ${st}" onclick="showScreen('letter','${l}',${currentIsUpper})">${l}${mark}</div>`;
  }).join('');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RENDER PRACTICE DOTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function renderPracticeDots(currentIdx) {
  const el = document.getElementById('practiceDots');
  if (!el) return;
  const letters = currentIsUpper ? UPPER : LOWER;
  const idx = currentIdx ?? letters.indexOf(currentLetter);
  const start = Math.max(0, idx - 3);
  const slice = letters.slice(start, start + 7);
  el.innerHTML = slice.map((l) =>
    `<div class="pdot ${l === currentLetter ? 'cur' : ''}"></div>`
  ).join('');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DRAWING CANVAS (Practice)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let practiceCtx, practiceIsDrawing = false, practiceStrokes = [];
let practiceCurrentStroke = [], practiceAllPoints = [];
let showGuide = true;

const W = 400, H = 400;
// 4ì„  ìœ„ì¹˜: ë…¸íŠ¸ ìƒí•˜ì— ì—¬ë°±ì„ ë‘” ì‹¤ì œ ê³µì±… ìŠ¤íƒ€ì¼ (8%/29%/50%/71%/92%)
// 4ì„ : ìº”ë²„ìŠ¤ ì •ì¤‘ì•™ ë°°ì¹˜. 1ë²ˆ(18.5%) íšŒìƒ‰, 2ë²ˆ(39.5%) íšŒìƒ‰íŒŒì„ , 3ë²ˆ(60.5%) ë¹¨ê°•, 4ë²ˆ(81.5%) íšŒìƒ‰
const LINE_POSITIONS = [0.185, 0.395, 0.605, 0.815];

function drawPracticeBackground(ctx) {
  ctx.fillStyle = '#FFFFFF';
  ctx.fillRect(0,0,W,H);
  LINE_POSITIONS.forEach((pct,i) => {
    const y = pct*H;
    ctx.beginPath(); ctx.moveTo(0,y); ctx.lineTo(W,y);
    ctx.lineWidth = 1.5;
    if (i === 2) {
      ctx.setLineDash([]); ctx.strokeStyle = '#EF4444';       // 3ë²ˆ: ë¹¨ê°•
    } else if (i === 1) {
      ctx.setLineDash([10,7]); ctx.strokeStyle = '#9CA3AF';   // 2ë²ˆ: íšŒìƒ‰ íŒŒì„ 
    } else {
      ctx.setLineDash([]); ctx.strokeStyle = '#9CA3AF';       // 1Â·4ë²ˆ: íšŒìƒ‰ ì‹¤ì„ 
    }
    ctx.stroke(); ctx.setLineDash([]);
  });
}

function drawGhost(ctx, letter, isUpper) {
  ctx.save();
  // ëŒ€ë¬¸ì: 2ë²ˆì„ (29%)~4ë²ˆì„ (71%), baseline at 4ë²ˆì„ (71%). fontSizeâ‰ˆH*0.583
  // ì†Œë¬¸ì: xë†’ì´ 3ë²ˆì„ (50%)~4ë²ˆì„ (71%), baseline at 4ë²ˆì„ (71%).
  const fs = isUpper ? H*0.583 : H*0.40;
  const by = H * 0.605;
  ctx.font = `bold ${fs}px Arial,sans-serif`;
  ctx.textAlign='center'; ctx.textBaseline='alphabetic';
  ctx.fillStyle='rgba(100,150,255,.13)';
  ctx.fillText(letter, W/2, by);
  ctx.restore();
}

function redrawPractice() {
  if (!practiceCtx) return;
  drawPracticeBackground(practiceCtx);
  if (showGuide) drawGhost(practiceCtx, currentLetter, currentIsUpper);
  practiceCtx.strokeStyle='#1E1B4B'; practiceCtx.lineWidth=5;
  practiceCtx.lineCap='round'; practiceCtx.lineJoin='round';
  for (const stroke of practiceStrokes) {
    if (stroke.length<2){
      practiceCtx.beginPath(); practiceCtx.arc(stroke[0].x,stroke[0].y,3,0,Math.PI*2);
      practiceCtx.fillStyle='#1E1B4B'; practiceCtx.fill(); continue;
    }
    practiceCtx.beginPath(); practiceCtx.moveTo(stroke[0].x,stroke[0].y);
    for(let i=1;i<stroke.length;i++){
      const p=stroke[i-1],c=stroke[i];
      practiceCtx.quadraticCurveTo(p.x,p.y,(p.x+c.x)/2,(p.y+c.y)/2);
    }
    practiceCtx.lineTo(stroke[stroke.length-1].x,stroke[stroke.length-1].y);
    practiceCtx.stroke();
  }
}

function getPos(canvas, e) {
  const r = canvas.getBoundingClientRect();
  const sx = canvas.width/r.width, sy = canvas.height/r.height;
  const clientX = e.touches ? e.touches[0].clientX : e.clientX;
  const clientY = e.touches ? e.touches[0].clientY : e.clientY;
  return {x:(clientX-r.left)*sx, y:(clientY-r.top)*sy};
}

function initCanvas() {
  const c = document.getElementById('drawCanvas');
  if (!c) return;
  practiceCtx = c.getContext('2d');
  practiceStrokes=[]; practiceCurrentStroke=[]; practiceAllPoints=[];
  redrawPractice();

  c.onpointerdown = e => { e.preventDefault(); practiceIsDrawing=true; const p=getPos(c,e); practiceCurrentStroke=[p]; practiceAllPoints.push(p); };
  c.onpointermove = e => {
    if(!practiceIsDrawing) return; e.preventDefault();
    const p=getPos(c,e), s=practiceCurrentStroke, l=s[s.length-1];
    if((p.x-l.x)**2+(p.y-l.y)**2<4) return;
    s.push(p); practiceAllPoints.push(p);
    practiceCtx.strokeStyle='#1E1B4B'; practiceCtx.lineWidth=5; practiceCtx.lineCap='round'; practiceCtx.lineJoin='round';
    practiceCtx.beginPath();
    if(s.length>=3){const p2=s[s.length-3],p1=s[s.length-2];practiceCtx.moveTo((p2.x+p1.x)/2,(p2.y+p1.y)/2);practiceCtx.quadraticCurveTo(p1.x,p1.y,(p1.x+p.x)/2,(p1.y+p.y)/2);}
    else{practiceCtx.moveTo(l.x,l.y);practiceCtx.lineTo(p.x,p.y);}
    practiceCtx.stroke();
  };
  const endDraw = e => { if(!practiceIsDrawing)return; e.preventDefault(); practiceIsDrawing=false; if(practiceCurrentStroke.length>0){practiceStrokes.push([...practiceCurrentStroke]);practiceCurrentStroke=[];} };
  c.onpointerup=endDraw; c.onpointerleave=endDraw; c.onpointercancel=endDraw;

  document.getElementById('clearBtn').onclick = () => { practiceStrokes=[]; practiceCurrentStroke=[]; practiceAllPoints=[]; document.getElementById('resultArea').innerHTML='<button class="submit-btn" onclick="submitPractice()">âœ… í™•ì¸í•˜ê¸°</button>'; redrawPractice(); };
  renderPracticeDots();
}

function toggleGuide() {
  showGuide = !showGuide;
  const btn = document.getElementById('guideToggle');
  btn.textContent = showGuide ? 'ğŸ‘ ê°€ì´ë“œ ON' : 'ğŸ™ˆ ê°€ì´ë“œ OFF';
  btn.className = 'tool-btn ' + (showGuide ? 'sky' : 'gray');
  redrawPractice();
}

function submitPractice() {
  const pts = practiceAllPoints;
  const pass = pts.length >= 20;
  document.getElementById('resultArea').innerHTML = pass ? `
    <div class="result-overlay result-pass">
      <div class="result-stars"><span>â­</span><span style="animation-delay:.15s">â­</span><span style="animation-delay:.3s">â­</span></div>
      <div class="result-letter font-baloo">${currentLetter}</div>
      <div class="result-title font-baloo">ì˜í–ˆì–´ìš”! ğŸ‰</div>
      <div class="result-msg">ì •ë§ ì˜ ì¼ì–´ìš”! ${currentIsUpper ? 'ëŒ€ë¬¸ì' : 'ì†Œë¬¸ì'}ë¥¼ ë°”ë¥´ê²Œ ì¼ì–´ìš”</div>
      <div class="result-btns">
        <button class="r-retry" onclick="retryPractice()">ğŸ”„ ë‹¤ì‹œ í•´ë³´ê¸°</button>
        <button class="r-next" onclick="showScreen('grid')">ë‹¤ìŒ ê¸€ì â†’</button>
      </div>
    </div>` : `
    <div class="result-overlay result-fail">
      <div style="font-size:44px;margin-bottom:8px">ğŸ’ª</div>
      <div class="result-title font-baloo" style="color:#b45309">ë‹¤ì‹œ í•´ë´ìš”!</div>
      <div style="background:rgba(255,255,255,.7);border-radius:14px;padding:12px;margin-bottom:16px;font-size:14px;color:#92400e">${pts.length<5?'ì•„ì§ ì•„ë¬´ê²ƒë„ ì•ˆ ì¼ì–´ìš”! ê¸€ìë¥¼ ì¨ë³´ì„¸ìš” âœï¸':'ê¸€ìê°€ ë„ˆë¬´ ì‘ì•„ìš”! ë” í¬ê²Œ ì¨ë³´ì„¸ìš” ğŸ“'}</div>
      <button class="submit-btn" style="background:linear-gradient(135deg,#f59e0b,#fb923c);box-shadow:0 8px 24px rgba(245,158,11,.35)" onclick="retryPractice()">ğŸ–Šï¸ ë‹¤ì‹œ ë„ì „!</button>
    </div>`;
  if (pass) spawnConfetti();
}

function retryPractice() {
  practiceStrokes=[]; practiceCurrentStroke=[]; practiceAllPoints=[];
  document.getElementById('resultArea').innerHTML='<button class="submit-btn" onclick="submitPractice()">âœ… í™•ì¸í•˜ê¸°</button>';
  redrawPractice();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   QUIZ CANVAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let quizCtx, quizIsDrawing=false, quizStrokes=[], quizCurrent=[], quizPoints=[];

function initQuizCanvas() {
  const c = document.getElementById('quizCanvas');
  if (!c||quizCtx) { if(quizCtx){quizStrokes=[];quizCurrent=[];quizPoints=[];redrawQuiz();} return; }
  quizCtx=c.getContext('2d');
  quizStrokes=[]; quizCurrent=[]; quizPoints=[];
  redrawQuiz();
  c.onpointerdown = e=>{e.preventDefault();quizIsDrawing=true;const p=getPos(c,e);quizCurrent=[p];quizPoints.push(p);};
  c.onpointermove = e=>{
    if(!quizIsDrawing)return;e.preventDefault();
    const p=getPos(c,e),s=quizCurrent,l=s[s.length-1];
    if((p.x-l.x)**2+(p.y-l.y)**2<4)return;
    s.push(p);quizPoints.push(p);
    quizCtx.strokeStyle='#1E1B4B';quizCtx.lineWidth=5;quizCtx.lineCap='round';quizCtx.lineJoin='round';
    quizCtx.beginPath();
    if(s.length>=3){const p2=s[s.length-3],p1=s[s.length-2];quizCtx.moveTo((p2.x+p1.x)/2,(p2.y+p1.y)/2);quizCtx.quadraticCurveTo(p1.x,p1.y,(p1.x+p.x)/2,(p1.y+p.y)/2);}
    else{quizCtx.moveTo(l.x,l.y);quizCtx.lineTo(p.x,p.y);}
    quizCtx.stroke();
  };
  const eq=e=>{if(!quizIsDrawing)return;e.preventDefault();quizIsDrawing=false;if(quizCurrent.length>0){quizStrokes.push([...quizCurrent]);quizCurrent=[];}};
  c.onpointerup=eq;c.onpointerleave=eq;c.onpointercancel=eq;
}

function redrawQuiz() {
  if(!quizCtx)return;
  drawPracticeBackground(quizCtx);
  quizCtx.strokeStyle='#1E1B4B';quizCtx.lineWidth=5;quizCtx.lineCap='round';quizCtx.lineJoin='round';
  for(const stroke of quizStrokes){
    if(stroke.length<2){quizCtx.beginPath();quizCtx.arc(stroke[0].x,stroke[0].y,3,0,Math.PI*2);quizCtx.fillStyle='#1E1B4B';quizCtx.fill();continue;}
    quizCtx.beginPath();quizCtx.moveTo(stroke[0].x,stroke[0].y);
    for(let i=1;i<stroke.length;i++){const p=stroke[i-1],c=stroke[i];quizCtx.quadraticCurveTo(p.x,p.y,(p.x+c.x)/2,(p.y+c.y)/2);}
    quizCtx.lineTo(stroke[stroke.length-1].x,stroke[stroke.length-1].y);quizCtx.stroke();
  }
}

function clearQuizCanvas(){quizStrokes=[];quizCurrent=[];quizPoints=[];redrawQuiz();}

function gradeQuiz() {
  const pass = quizPoints.length >= 20;
  const wrap = document.querySelector('.quiz-canvas-wrap');
  const overlay = document.createElement('div');
  overlay.style.cssText = `position:absolute;inset:0;border-radius:16px;display:flex;flex-direction:column;align-items:center;justify-content:center;${pass?'background:rgba(34,197,94,.8)':'background:rgba(245,158,11,.8)'}`;
  overlay.innerHTML = `<div style="font-size:72px;margin-bottom:8px">${pass?'â­':'ğŸ’ª'}</div><p style="color:white;font-family:'Baloo 2','Noto Sans KR',sans-serif;font-size:32px;font-weight:800;">${pass?'ì •ë‹µ!':'ë‹¤ì‹œ ë„ì „!'}</p><p style="color:rgba(255,255,255,.9);font-size:14px;margin-top:6px">${pass?'ì •ë§ ì˜ ì¼ì–´ìš”!':'ë” í¬ê²Œ ì¨ë³´ì„¸ìš”'}</p>`;
  wrap.appendChild(overlay);
  if(pass)spawnConfetti();
  setTimeout(()=>{overlay.remove();clearQuizCanvas();showScreen('result');},pass?1500:2000);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STROKE MODAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function showStrokeModal() {
  const group = document.getElementById('strokeGroup');
  // ëŒ€ë¬¸ì/ì†Œë¬¸ìì— ë”°ë¼ transformê³¼ íš ë°ì´í„° ì„ íƒ
  const isUpper = currentIsUpper;
  const strokeData = isUpper ? uppercaseStrokes : lowercaseStrokes;
  const paths = strokeData[currentLetter] || [];

  // ëŒ€ë¬¸ì: matrix(0.5,0,0,0.5,25,14.5) ì ìš©, ì†Œë¬¸ì: transform ì—†ìŒ
  if (isUpper) {
    group.setAttribute('transform', 'matrix(0.5, 0, 0, 0.5, 25, 14.5)');
  } else {
    group.removeAttribute('transform');
  }

  // ì œëª© ì—…ë°ì´íŠ¸
  document.getElementById('strokeModalTitle').textContent = `${currentLetter} íš ìˆœì„œ`;

  // ê¸°ì¡´ íš ì œê±°
  group.innerHTML = '';
  const colors = ['#E74C3C','#E67E22','#2ECC71','#3498DB','#9B59B6'];
  const sw = isUpper ? '8' : '5';
  const cr = isUpper ? 8 : 5.5;
  const fs = isUpper ? 8 : 5.5;

  if (!document.getElementById('strokeStyle')) {
    const st = document.createElement('style');
    st.id = 'strokeStyle';
    st.textContent = '@keyframes draw-stroke{to{stroke-dashoffset:0}}';
    document.head.appendChild(st);
  }

  paths.forEach((d, i) => {
    const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
    path.setAttribute('d', d);
    path.setAttribute('stroke', colors[i % colors.length]);
    path.setAttribute('stroke-width', sw);
    path.setAttribute('fill', 'none');
    path.setAttribute('stroke-linecap', 'round');
    path.setAttribute('stroke-linejoin', 'round');
    group.appendChild(path);
    // getTotalLength() after append so the element is in DOM
    const len = path.getTotalLength() || 200;
    path.style.cssText = `stroke-dasharray:${len};stroke-dashoffset:${len};animation:draw-stroke 0.9s ${i*1.1}s cubic-bezier(0.4,0,0.2,1) forwards`;

    // ì‹œì‘ ë²ˆí˜¸ í‘œì‹œ
    const m = d.match(/M\s*([\d.]+)[,\s]([\d.]+)/);
    if (m) {
      const cx = parseFloat(m[1]), cy = parseFloat(m[2]);
      const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
      circle.setAttribute('cx', cx); circle.setAttribute('cy', cy); circle.setAttribute('r', cr);
      circle.setAttribute('fill', colors[i % colors.length]); circle.setAttribute('opacity', '0.9');
      const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
      text.setAttribute('x', cx); text.setAttribute('y', cy + 2);
      text.setAttribute('text-anchor', 'middle'); text.setAttribute('dominant-baseline', 'middle');
      text.setAttribute('font-size', fs); text.setAttribute('font-weight', 'bold'); text.setAttribute('fill', 'white');
      text.textContent = i + 1;
      group.appendChild(circle);
      group.appendChild(text);
    }
  });
  document.getElementById('strokeModal').classList.add('show');
}

function hideStrokeModal() {
  document.getElementById('strokeModal').classList.remove('show');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MODE SELECTION (Quiz)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function selectMode(btn, color) {
  document.querySelectorAll('.mode-pick-btn').forEach(b => {
    b.className = 'mode-pick-btn';
  });
  btn.classList.add('sel-' + color);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONFETTI
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function spawnConfetti() {
  const colors=['#f59e0b','#34d399','#60a5fa','#f472b6','#a78bfa','#fb923c'];
  for(let i=0;i<60;i++){
    const el=document.createElement('div');
    el.className='confetti-piece';
    el.style.left=Math.random()*100+'vw';
    el.style.top='-20px';
    el.style.background=colors[Math.floor(Math.random()*colors.length)];
    el.style.width=(8+Math.random()*8)+'px';
    el.style.height=(8+Math.random()*8)+'px';
    el.style.borderRadius=Math.random()>.5?'50%':'2px';
    el.style.animationDuration=(2+Math.random()*2)+'s';
    el.style.animationDelay=(Math.random()*.5)+'s';
    document.body.appendChild(el);
    setTimeout(()=>el.remove(),(4+Math.random()*2)*1000);
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INIT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
renderDots('upperDots', UPPER, upperStatus);
renderDots('lowerDots', LOWER, lowerStatus);
renderLetterGrid();
</script>
</body>
</html>
